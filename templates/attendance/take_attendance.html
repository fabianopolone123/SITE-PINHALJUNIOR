{% extends "base.html" %}
{% load attendance_extras %}
{% block title %}Chamada de PresenÃ§a{% endblock %}
{% block menu %}
    <a href="{% url 'dashboard' %}">ğŸ  InÃ­cio</a>
    <a href="{% url 'attendance-sessions' %}">ğŸ“‹ PresenÃ§a</a>
    <a href="{% url 'children-list' %}">ğŸ§’ Aventureiros</a>
    <a href="{% url 'logout' %}">Sair</a>
{% endblock %}
{% block content %}
<div class="card">
    <div class="chip">Chamada - {{ session.get_type_display }} ({{ session.class_group }})</div>
    <p>Data: {{ session.date }}</p>
    <form method="post">
        {% csrf_token %}
        <table style="width:100%; border-collapse: collapse;">
            <thead>
                <tr style="text-align:left;">
                    <th>Aventureiro</th>
                    <th>Presente?</th>
                    <th>ObservaÃ§Ã£o</th>
                </tr>
            </thead>
            <tbody>
                {% for child in children %}
                {% with record=records_map|get_item:child.id %}
                <tr style="border-top:1px solid #e2e8f0;">
                    <td>{{ child.name }}</td>
                    <td>
                        <input type="checkbox" name="present_{{ child.id }}" {% if record and record.present %}checked{% endif %}>
                    </td>
                    <td>
                        <input type="text" name="note_{{ child.id }}" value="{% if record %}{{ record.note }}{% endif %}" style="width:100%;">
                    </td>
                </tr>
                {% endwith %}
                {% empty %}
                <tr><td colspan="3">Nenhum aventureiro nesta turma. Cadastre crianÃ§as com esta classe para marcar presenÃ§a.</td></tr>
                {% endfor %}
            </tbody>
        </table>
        <button type="submit" style="margin-top:14px; padding:12px 14px; border:none; border-radius:12px; background:linear-gradient(90deg,#22c55e,#16a34a); color:#fff; font-weight:800;">Salvar presenÃ§a</button>
    </form>
</div>
{% endblock %}
